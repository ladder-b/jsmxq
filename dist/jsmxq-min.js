!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.jsmxq=t():e.jsmxq=t()}(window,(function(){return function(e){var t={};function s(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(i,r,function(t){return e[t]}.bind(null,r));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=1)}([function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gMsgCounter=void 0,t.gMsgCounter=0;t.default=class{constructor(e,s){this.ttl=10,this.uid=t.gMsgCounter,t.gMsgCounter++,this.subject=e,this.content=s,this.source="",this.dst="",this.sentTime=0,this.deliverTime=0}getSource(){return this.source}getDst(){return this.dst}getSubject(){return this.subject}getSentTime(){return this.sentTime}getDeleverTime(){return this.deliverTime}getContent(){return this.content}getTtl(){return this.ttl}getUid(){return this.uid}setDst(e){this.dst=e}setSource(e){this.source=e}setSentTime(e){this.sentTime=e}setDeliverTime(e){this.deliverTime=e}setTtl(e){this.ttl=e}setUid(e){this.uid=e}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=t.Xchange=t.Subscriber=void 0;const i=s(2);t.Subscriber=i.default;const r=s(3);t.Xchange=r.default;const n=s(0);t.Message=n.default},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gSubscriberCounter=void 0;const i=s(0);t.gSubscriberCounter=0;t.default=class{constructor(e){this.name=e,this.uid=t.gSubscriberCounter,t.gSubscriberCounter++,this.subjectList=[],this.msgSentCount=0,this.msgRecvdCount=0,this.subscriberObj=this}getName(){return this.name}getUid(){return this.uid}getSubjectList(){return this.subjectList}getMsgSentCount(){return this.msgSentCount}getMsgRecvdCount(){return this.msgRecvdCount}setCallbackObj(e){this.subscriberObj=e}addSubject(e){this.subjectList.push(e),void 0!==this.xchange&&this.xchange.subscribeToSubject(this,e)}unsubscribe(){void 0!==this.xchange&&this.xchange.unsubscribe(this)}removeSubject(e){this.xchange.unsubscribeToSubject(this,e)}setXchange(e){this.xchange=e}post(e,t,s,r=10){if(void 0===this.xchange)throw new Error("Error: subscriber not registered to any Exchange");try{let n=new i.default(e,t);n.setSentTime(Date.now()),n.setTtl(r),n.setDst(s),n.setSource(this.getName()),this.xchange.post(n),this.msgSentCount++}catch(e){throw e}}onMessageReceive(e){}__onMessageReceive(e){this.msgRecvdCount++,void 0!==this.subscriberObj&&this.subscriberObj.onMessageReceive(e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(4);class r{constructor(e){this.re=e,this.subscriberList=[]}}t.default=class{constructor(){this.subscriberMap=new Map,this.reSubscribers=[],this.msgQ=new i.default}getSubscriberMap(){return this.subscriberMap}getSubscriberList(e){if("string"==typeof e)return this.subscriberMap.get(e)}subscribeToSubject(e,t){if("string"==typeof t){let s=this.getSubscriberList(t);void 0===s&&(s=[],this.subscriberMap.set(t,s)),-1===s.indexOf(e)&&s.push(e)}else if(t instanceof RegExp){let s=this.reSubscribers.find(e=>e.re.toString()===t.toString());void 0===s?(s=new r(t),s.subscriberList.push(e),this.reSubscribers.push(s)):-1===s.subscriberList.indexOf(e)&&s.subscriberList.push(e)}}subscribe(e){if(void 0===e.getName())throw new Error("Error: Subscriber name not supplied");this.unsubscribe(e),e.subjectList&&e.subjectList.length>0&&e.subjectList.forEach(t=>{this.subscribeToSubject(e,t)}),e.setXchange(this)}unsubscribeToSubject(e,t){if("string"==typeof t){let s=this.getSubscriberList(t);if(void 0!==s){let i=s.findIndex(t=>t.getName()===e.getName());i>=0&&(s.splice(i,1),0===s.length&&this.subscriberMap.delete(t))}}else if(t instanceof RegExp){let s=this.reSubscribers.find(e=>e.re.toString()===t.toString());if(void 0!==s){let t=s.subscriberList.indexOf(e);t>=0&&s.subscriberList.splice(t,1)}}}unsubscribe(e){if(void 0===e.getName()||void 0===e.getSubjectList())throw new Error("Error: Subscriber parameter error, either name or subect is undefined");this.getSubscriberMap().forEach((t,s)=>{this.unsubscribeToSubject(e,s)}),e.setXchange(void 0)}post(e){this.msgQ.push(e),this.run()}sendRe(e){this.reSubscribers.map(t=>{t.re.test(e.subject)&&(e.setDeliverTime(Date.now()),t.subscriberList.map(t=>t.__onMessageReceive(e)))})}send(e){if(void 0===e.getSubject())throw new Error("Error: message subject is undefined");let t=this.getSubscriberList(e.getSubject());void 0!==t&&t.forEach(t=>{e.setDeliverTime(Date.now()),t.__onMessageReceive(e)}),this.sendRe(e)}run(){for(;this.msgQ.getSize()>0;){let e=this.msgQ.pop();this.send(e)}}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LLObj=void 0;class i{constructor(e,t=0,s=0){this.number=t,this.priority=s,this.obj=e}}t.LLObj=i;t.default=class{constructor(){this.size=0}getSize(){return this.size}push(e){let t=new i(e,this.size);0===this.size?this.head=t:(this.tail.next=t,t.prev=this.tail),this.size++,this.tail=t}removeLLObj(e){void 0!==e.prev&&(e.prev.next=e.next),void 0!==e.next&&(e.next.prev=e.prev),this.size--}remove(e){this.removeLLObj(this.getLLObj(e))}getLLObj(e){if(e<0||e>=this.size)throw new Error("Error: invalid index");let t;if(e<this.size/2){t=this.head;for(let s=0;s<e;s++)t=t.next}else{t=this.tail;for(let s=this.size-1;s>e;s--)t=t.prev}return t}get(e){let t=this.getLLObj(e);return this.removeLLObj(t),t.obj}getHead(){if(this.size>0){let e=this.head.obj;return this.head=this.head.next,this.size--,this.head&&(this.head.prev=void 0),e}throw new Error("No objects in list")}pop(){if(this.size>0){this.size--;let e=this.tail;return this.tail=e.prev,void 0!==this.tail&&(this.tail.next=void 0),e.prev=void 0,e.next=void 0,e.obj}throw new Error("Error pop() operation: Linked list in empty")}}}])}));
//# sourceMappingURL=jsmxq-min.js.map